SECTION .text
GLOBAL _start
EXTERN printhex

%macro ADC 4
	clc
	%assign i 0
	%rep %4/64
	mov rax, [%1+8*i]
	adc rax, [%2+8*i]
	mov [%3+8*i], rax
	%assign i i+1
	%endrep
%endmacro

_start:
	ADC A, B, C, 512

	mov rsi, C
	mov rcx, 64
	call printhex
	
	mov rax, 60 
	mov rdi, 0 
	syscall 

SECTION .data
A DQ	0x7766554433221100, 0xFFEEDDCCBBAA9988, 0x5555555555555555, 0x4444444444444444, 0x3333333333333333, 0x2222222222222222, 0x1111111111111111, 0x6666666666666666
B DQ	0x3333333333333333, 0x2222222222222222, 0x1111111111111111, 0x6666666666666666, 0x7766554433221100, 0xFFEEDDCCBBAA9988, 0x5555555555555555, 0x4444444444444444
C DQ    0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000
